<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Market New Tab</title>
  <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@30.1.0/dist/font-face.css" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="bg-overlay"></div>
  <div id="app">
    <header>
      <div class="logo">📈 <span>Market</span></div>
      <h1>قیمت لحظه‌ای رمزارزها</h1>
      <div class="header-controls">
        <button id="refreshBtn" title="بروزرسانی">
          <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 50 50">
            <path d="M 25 2 A 2.0002 2.0002 0 1 0 25 6 C 35.517124 6 44 14.482876 44 25 C 44 35.517124 35.517124 44 25 44 C 14.482876 44 6 35.517124 6 25 C 6 19.524201 8.3080175 14.608106 12 11.144531 L 12 15 A 2.0002 2.0002 0 1 0 16 15 L 16 4 L 5 4 A 2.0002 2.0002 0 1 0 5 8 L 9.5253906 8 C 4.9067015 12.20948 2 18.272325 2 25 C 2 37.678876 12.321124 48 25 48 C 37.678876 48 48 37.678876 48 25 C 48 12.321124 37.678876 2 25 2 z"></path>
          </svg>
        </button>
        
        <button id="updateBtn" title="بررسی آپدیت" class="update-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12a9 9 0 0 1-9 9m9-9a9 9 0 0 0-9-9m9 9H3m12 3l3-3-3-3M6 9l-3 3 3 3"/>
          </svg>
        </button>
        
        <button id="settingsBtn" title="تنظیمات">
          <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 24 24">
            <path d="M 9.6660156 2 L 9.1757812 4.5234375 C 8.3516137 4.8342536 7.5947862 5.2699307 6.9316406 5.8144531 L 4.5078125 4.9785156 L 2.171875 9.0214844 L 4.1132812 10.708984 C 4.0386488 11.16721 4 11.591845 4 12 C 4 12.408768 4.0398071 12.832626 4.1132812 13.291016 L 4.1132812 13.292969 L 2.171875 14.980469 L 4.5078125 19.021484 L 6.9296875 18.1875 C 7.5928951 18.732319 8.3514346 19.165567 9.1757812 19.476562 L 9.6660156 22 L 14.333984 22 L 14.824219 19.476562 C 15.648925 19.165543 16.404903 18.73057 17.068359 18.185547 L 19.492188 19.021484 L 21.826172 14.980469 L 19.886719 13.291016 C 19.961351 12.83279 20 12.408155 20 12 C 20 11.592457 19.96113 11.168374 19.886719 10.710938 L 19.886719 10.708984 L 21.828125 9.0195312 L 19.492188 4.9785156 L 17.070312 5.8125 C 16.407106 5.2676813 15.648565 4.8344327 14.824219 4.5234375 L 14.333984 2 L 9.6660156 2 z M 11.314453 4 L 12.685547 4 L 13.074219 6 L 14.117188 6.3945312 C 14.745852 6.63147 15.310672 6.9567546 15.800781 7.359375 L 16.664062 8.0664062 L 18.585938 7.40625 L 19.271484 8.5917969 L 17.736328 9.9277344 L 17.912109 11.027344 L 17.912109 11.029297 C 17.973258 11.404235 18 11.718768 18 12 C 18 12.281232 17.973259 12.595718 17.912109 12.970703 L 17.734375 14.070312 L 19.269531 15.40625 L 18.583984 16.59375 L 16.664062 15.931641 L 15.798828 16.640625 C 15.308719 17.043245 14.745852 17.36853 14.117188 17.605469 L 14.115234 17.605469 L 13.072266 18 L 12.683594 20 L 11.314453 20 L 10.925781 18 L 9.8828125 17.605469 C 9.2541467 17.36853 8.6893282 17.043245 8.1992188 16.640625 L 7.3359375 15.933594 L 5.4140625 16.59375 L 4.7285156 15.408203 L 6.265625 14.070312 L 6.0878906 12.974609 L 6.0878906 12.972656 C 6.0276183 12.596088 6 12.280673 6 12 C 6 11.718768 6.026742 11.404282 6.0878906 11.029297 L 6.265625 9.9296875 L 4.7285156 8.59375 L 5.4140625 7.40625 L 7.3359375 8.0683594 L 8.1992188 7.359375 C 8.6893282 6.9567546 9.2541467 6.6314701 9.8828125 6.3945312 L 10.925781 6 L 11.314453 4 z M 12 8 C 9.8034768 8 8 9.8034768 8 12 C 8 14.196523 9.8034768 16 12 16 C 14.196523 16 16 14.196523 16 12 C 16 9.8034768 14.196523 8 12 8 z M 12 10 C 13.111477 10 14 10.888523 14 12 C 14 13.111477 13.111477 14 12 14 C 10.888523 14 10 13.111477 10 12 C 10 10.888523 10.888523 10 12 10 z"></path>
          </svg>
        </button>
      </div>
      <div id="last-updated">در حال بارگذاری...</div>
    </header>

    <!-- کارت‌های رمزارز -->
    <aside id="crypto-cards"></aside>

    <!-- کارت‌های آب‌وهوا -->
    <aside id="weather-cards"></aside>

    <div id="main-content">
      <section id="search-section">
        <img src="./images/google-logo.png" alt="Google" id="googleLogo">
        <h2>test github</h2>
        <form id="googleSearchForm">
          <input id="googleSearchInput" type="text" placeholder="جستجو در گوگل یا وارد کردن آدرس..." />
          <button type="submit">
            <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 128 128">
              <path d="M 56.599609 21.599609 C 34.099609 21.599609 15.800781 40.100781 15.800781 62.800781 C 15.800781 85.600781 34.099609 104 56.599609 104 C 66.899609 104 76.3 100.09922 83.5 93.699219 L 85.800781 96 L 83.699219 98.199219 C 82.499219 99.399219 82.499219 101.3 83.699219 102.5 L 101.69922 120.69922 C 102.29922 121.29922 103.00078 121.59961 103.80078 121.59961 C 104.60078 121.59961 105.40039 121.29922 105.90039 120.69922 L 113.90039 112.59961 C 115.00039 111.39961 115.00078 109.50039 113.80078 108.40039 L 95.800781 90.199219 C 95.200781 89.599219 94.499219 89.300781 93.699219 89.300781 C 92.899219 89.300781 92.099609 89.599219 91.599609 90.199219 L 89.5 92.400391 L 87.199219 90 C 93.499219 82.7 97.400391 73.200781 97.400391 62.800781 C 97.400391 40.100781 79.099609 21.599609 56.599609 21.599609 z M 56.599609 27.699219 C 75.799609 27.699219 91.400391 43.500391 91.400391 62.900391 C 91.400391 82.300391 75.799609 98 56.599609 98 C 37.399609 98 21.800781 82.300391 21.800781 62.900391 C 21.800781 43.500391 37.399609 27.699219 56.599609 27.699219 z M 56.699219 40.199219 C 47.199219 40.199219 38.7 46.300781 35.5 55.300781 C 35 56.600781 35.699609 58.199609 37.099609 58.599609 C 37.399609 58.699609 37.7 58.800781 38 58.800781 C 39.1 58.800781 40.1 58.1 40.5 57 C 42.9 50.1 49.499219 45.400391 56.699219 45.400391 C 58.099219 45.400391 59.300781 44.200781 59.300781 42.800781 C 59.300781 41.400781 58.099219 40.199219 56.699219 40.199219 z M 37.699219 64.900391 C 36.299219 64.900391 35.099609 66 35.099609 67.5 L 35.099609 67.900391 C 35.199609 69.300391 36.300781 70.5 37.800781 70.5 C 39.200781 70.5 40.400391 69.300391 40.400391 67.900391 L 40.400391 67.599609 C 40.400391 66.099609 39.300781 64.900391 37.800781 64.900391 L 37.699219 64.900391 z M 93.800781 96.599609 L 107.59961 110.59961 L 103.80078 114.40039 L 90 100.40039 L 93.800781 96.599609 z"></path>
            </svg>
          </button>
        </form>
      </section>
      <section id="ticker-row"></section>
    </div>
  </div>

  <!-- Modal تنظیمات -->
  <div id="settingsModal" class="modal hidden">
    <div class="modal-content">
      <h3>تنظیمات</h3>
      <div class="modal-body">
        <label>واحد پایه:
          <select id="baseCurrency">
            <option value="USD">USD</option>
            <option value="EUR">EUR</option>
            <option value="IRR">IRR</option>
          </select>
        </label>
        <label>رمزارزها (با کاما جدا کنید):
          <input id="cryptoList" type="text" placeholder="bitcoin,ethereum,tether" />
        </label>
        <label>کلید Metals API (اختیاری):
          <input id="goldApiKey" type="text" placeholder="کلید API" />
        </label>
        <label>کلید Weather API (اختیاری):
          <input id="weatherApiKey" type="text" placeholder="کلید API WeatherAPI" />
        </label>
        <label>شهرهای آب‌وهوا (با کاما جدا کنید):
          <input id="cities" type="text" placeholder="Tehran,London,New York" />
        </label>
        
        <!-- بخش جدید: تنظیمات پس‌زمینه -->
        <label>پس‌زمینه:
          <select id="backgroundType">
            <option value="default">پیش‌فرض</option>
            <option value="upload">آپلود عکس</option>
            <option value="url">لینک عکس</option>
            <option value="color">رنگ ساده</option>
          </select>
        </label>

        <div id="uploadSection" class="background-section hidden">
          <input type="file" id="backgroundUpload" accept="image/*" />
          <div id="uploadPreview" class="preview-container hidden">
            <img class="preview-image" src="" alt="پیش‌نمایش" />
            <div class="preview-text">پیش‌نمایش عکس آپلودی</div>
          </div>
        </div>

        <div id="urlSection" class="background-section hidden">
          <input type="url" id="backgroundUrl" placeholder="https://example.com/image.jpg" />
          <button id="testBackgroundUrl" type="button">تست لینک</button>
          <div id="urlPreview" class="preview-container hidden">
            <img class="preview-image" src="" alt="پیش‌نمایش" />
            <div class="preview-text">پیش‌نمایش عکس لینک</div>
          </div>
        </div>

        <div id="colorSection" class="background-section hidden">
          <input type="color" id="backgroundColor" value="#0e1623" />
          <div id="colorPreview" class="preview-container">
            <div class="color-preview-box" style="background: #0e1623;"></div>
            <div class="preview-text">پیش‌نمایش رنگ انتخاب شده</div>
          </div>
        </div>
      </div>

      <div class="modal-actions">
        <button id="saveSettings">ذخیره</button>
        <button id="closeSettings">بستن</button>
      </div>
    </div>
  </div>

  <script src="newtab.js"></script>
</body>
</html>